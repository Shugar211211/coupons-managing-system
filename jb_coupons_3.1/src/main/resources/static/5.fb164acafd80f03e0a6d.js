(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jkDv:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",function(){return Mt});var r=n("PCNd"),i=n("fXoL"),a=n("tyNb");const o=function(){return["/admin/companies"]},s=function(){return["/admin/customers"]};let c=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["app-admin-home"]],decls:13,vars:4,consts:[[1,"container"],[1,"container","card"],[3,"routerLink"],[1,"btn","btn-dark"]],template:function(t,e){1&t&&(i.Kb(0,"div",0),i.Kb(1,"h2"),i.jc(2,"Admin dashboard"),i.Jb(),i.Jb(),i.Kb(3,"div",1),i.Kb(4,"a",2),i.Kb(5,"button",3),i.jc(6,"Companies"),i.Jb(),i.Jb(),i.Kb(7,"a",2),i.Kb(8,"button",3),i.jc(9,"Customers"),i.Jb(),i.Jb(),i.Jb(),i.Kb(10,"div",1),i.Kb(11,"h3"),i.jc(12,"... additional info might be here ..."),i.Jb(),i.Jb()),2&t&&(i.xb(4),i.Xb("routerLink",i.Zb(2,o)),i.xb(3),i.Xb("routerLink",i.Zb(3,s)))},directives:[a.e],styles:[".container[_ngcontent-%COMP%]{max-width:600px;align-items:center;margin-left:auto;margin-right:auto;margin-top:3rem;padding:2rem}button[_ngcontent-%COMP%]{font-size:1.5rem}"]}),t})();var b=n("IYfF"),m=n("FYjP");const l=function(){return["/admin","home"]},u=function(){return["/admin","companies"]},d=function(){return["/admin","customers"]};let f=(()=>{class t{constructor(t,e){this.router=t,this.authService=e}ngOnInit(){this.name=sessionStorage.getItem("name")}logout(t){t.preventDefault(),this.authService.logout(),this.router.navigate(["/"])}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(a.c),i.Hb(b.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-admin-layout"]],decls:19,vars:7,consts:[[1,"navbar","bg-primary"],["routerLinkActive","active"],[3,"routerLink"],["href","#",3,"click"],[1,"container"]],template:function(t,e){1&t&&(i.Kb(0,"nav",0),i.Kb(1,"h1"),i.jc(2),i.Jb(),i.Kb(3,"ul"),i.Kb(4,"li",1),i.Kb(5,"a",2),i.jc(6,"Home"),i.Jb(),i.Jb(),i.Kb(7,"li",1),i.Kb(8,"a",2),i.jc(9,"Companies"),i.Jb(),i.Jb(),i.Kb(10,"li",1),i.Kb(11,"a",2),i.jc(12,"Customers"),i.Jb(),i.Jb(),i.Kb(13,"li"),i.Kb(14,"a",3),i.Rb("click",function(t){return e.logout(t)}),i.jc(15,"Logout"),i.Jb(),i.Jb(),i.Jb(),i.Jb(),i.Kb(16,"div",4),i.Ib(17,"app-alert"),i.Ib(18,"router-outlet"),i.Jb()),2&t&&(i.xb(2),i.lc("Welcome ",e.name,""),i.xb(3),i.Xb("routerLink",i.Zb(4,l)),i.xb(3),i.Xb("routerLink",i.Zb(5,u)),i.xb(3),i.Xb("routerLink",i.Zb(6,d)))},directives:[a.d,a.e,m.a,a.g],styles:[".container[_ngcontent-%COMP%]{max-width:700px}"]}),t})();var p=n("ofXK"),g=n("ijts"),h=n("Cmua"),v=n("3Pt+");let J=(()=>{class t{transform(t,e=""){return e.trim()?t.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Gb({name:"findCompanyByName",type:t,pure:!0}),t})();const K=function(t){return["/admin/companies/data",t]};function w(t,e){if(1&t&&(i.Kb(0,"div",7),i.Kb(1,"span"),i.Kb(2,"bold"),i.jc(3),i.Jb(),i.Jb(),i.Kb(4,"a",0),i.Kb(5,"button",1),i.jc(6,"Details"),i.Jb(),i.Jb(),i.Jb()),2&t){const t=e.$implicit;i.xb(1),i.zb("completed",t.completed),i.xb(2),i.kc(t.name),i.xb(1),i.Xb("routerLink",i.ac(4,K,t.id))}}function x(t,e){if(1&t){const t=i.Lb();i.Kb(0,"div"),i.Kb(1,"input",5),i.Rb("ngModelChange",function(e){return i.ec(t),i.Tb(2).searchStr=e}),i.Jb(),i.hc(2,w,7,6,"div",6),i.Ub(3,"findCompanyByName"),i.Jb()}if(2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngModel",t.searchStr),i.xb(1),i.Xb("ngForOf",i.Wb(3,2,t.companies,t.searchStr))}}function y(t,e){if(1&t&&(i.Kb(0,"div"),i.hc(1,x,4,5,"div",2),i.Jb()),2&t){const t=i.Tb(),e=i.dc(7);i.xb(1),i.Xb("ngIf",t.companies.length)("ngIfElse",e)}}function I(t,e){1&t&&(i.Kb(0,"p",8),i.jc(1,"Loading..."),i.Jb())}function C(t,e){1&t&&(i.Kb(0,"p"),i.jc(1,"No companies registered"),i.Jb())}const j=function(){return["/admin/companies/new"]};let S=(()=>{class t{constructor(t,e){this.companiesService=t,this.alertService=e,this.loading=!1,this.companies=[],this.searchStr=""}ngOnInit(){this.loading=!0,this.cSub=this.companiesService.getAll().subscribe(t=>{this.companies=t,this.loading=!1},t=>{this.alertService.danger(t.error.message)})}ngOnDestroy(){this.cSub&&this.cSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(g.a),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-companies"]],decls:8,vars:4,consts:[[3,"routerLink"],[1,"btn","btn-dark"],[4,"ngIf","ngIfElse"],["loadingBlock",""],["noElements",""],["type","text","placeholder","Search company by name...",3,"ngModel","ngModelChange"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"text-center"]],template:function(t,e){if(1&t&&(i.Kb(0,"a",0),i.Kb(1,"button",1),i.jc(2,"Add new company"),i.Jb(),i.Jb(),i.hc(3,y,2,2,"div",2),i.hc(4,I,2,0,"ng-template",null,3,i.ic),i.hc(6,C,2,0,"ng-template",null,4,i.ic)),2&t){const t=i.dc(5);i.Xb("routerLink",i.Zb(3,j)),i.xb(3),i.Xb("ngIf",!e.loading)("ngIfElse",t)}},directives:[a.e,p.m,v.a,v.g,v.i,p.l],pipes:[J],styles:[".card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;vertical-align:middle}span[_ngcontent-%COMP%]{font-size:1.4rem}input[_ngcontent-%COMP%]{margin-top:10px}"]}),t})();var k=n("AytR"),X=n("tk/3");let N=(()=>{class t{constructor(t){this.http=t}add(t){return this.http.post(k.a.apiUrl+"/api/admin/customers",t)}delete(t){return this.http.delete(`${k.a.apiUrl}/api/admin/customers/${t}`)}getAll(){return this.http.get(k.a.apiUrl+"/api/admin/customers")}getById(t){return this.http.get(`${k.a.apiUrl}/api/admin/customers/${t}`)}update(t){return this.http.put(k.a.apiUrl+"/api/admin/customers",t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(X.b))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),L=(()=>{class t{transform(t,e=""){return e.trim()?t.filter(t=>t.firstName.toLowerCase().includes(e.toLowerCase())):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=i.Gb({name:"findCustomerByName",type:t,pure:!0}),t})();const O=function(t){return["/admin/customers/data",t]};function q(t,e){if(1&t&&(i.Kb(0,"div",7),i.Kb(1,"span"),i.Kb(2,"bold"),i.jc(3),i.Jb(),i.Jb(),i.Kb(4,"a",0),i.Kb(5,"button",1),i.jc(6,"Details"),i.Jb(),i.Jb(),i.Jb()),2&t){const t=e.$implicit;i.xb(1),i.zb("completed",t.completed),i.xb(2),i.mc("",t.firstName," ",t.lastName,""),i.xb(1),i.Xb("routerLink",i.ac(5,O,t.id))}}function P(t,e){if(1&t){const t=i.Lb();i.Kb(0,"div"),i.Kb(1,"input",5),i.Rb("ngModelChange",function(e){return i.ec(t),i.Tb(2).searchStr=e}),i.Jb(),i.hc(2,q,7,7,"div",6),i.Ub(3,"findCustomerByName"),i.Jb()}if(2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngModel",t.searchStr),i.xb(1),i.Xb("ngForOf",i.Wb(3,2,t.customers,t.searchStr))}}function M(t,e){if(1&t&&(i.Kb(0,"div"),i.hc(1,P,4,5,"div",2),i.Jb()),2&t){const t=i.Tb(),e=i.dc(7);i.xb(1),i.Xb("ngIf",t.customers.length)("ngIfElse",e)}}function T(t,e){1&t&&(i.Kb(0,"p",8),i.jc(1,"Loading..."),i.Jb())}function R(t,e){1&t&&(i.Kb(0,"p"),i.jc(1,"No customers registered"),i.Jb())}const _=function(){return["/admin/customers/new"]};let E=(()=>{class t{constructor(t,e){this.customersService=t,this.alertService=e,this.loading=!1,this.customers=[],this.searchStr=""}ngOnInit(){this.loading=!0,this.cSub=this.customersService.getAll().subscribe(t=>{this.customers=t,this.loading=!1},t=>{this.alertService.danger(t.error.message)})}ngOnDestroy(){this.cSub&&this.cSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(N),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-customers"]],decls:8,vars:4,consts:[[3,"routerLink"],[1,"btn","btn-dark"],[4,"ngIf","ngIfElse"],["loadingBlock",""],["noElements",""],["type","text","placeholder","Search customer by first name...",3,"ngModel","ngModelChange"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"text-center"]],template:function(t,e){if(1&t&&(i.Kb(0,"a",0),i.Kb(1,"button",1),i.jc(2,"Add new customer"),i.Jb(),i.Jb(),i.hc(3,M,2,2,"div",2),i.hc(4,T,2,0,"ng-template",null,3,i.ic),i.hc(6,R,2,0,"ng-template",null,4,i.ic)),2&t){const t=i.dc(5);i.Xb("routerLink",i.Zb(3,_)),i.xb(3),i.Xb("ngIf",!e.loading)("ngIfElse",t)}},directives:[a.e,p.m,v.a,v.g,v.i,p.l],pipes:[L],styles:[".card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;vertical-align:middle}span[_ngcontent-%COMP%]{font-size:1.4rem}input[_ngcontent-%COMP%]{margin-top:10px}"]}),t})();function B(t,e){if(1&t){const t=i.Lb();i.Kb(0,"div"),i.Kb(1,"span"),i.Kb(2,"h3"),i.jc(3,"Email: "),i.Ib(4,"br"),i.jc(5),i.Jb(),i.Jb(),i.Kb(6,"span"),i.Kb(7,"h3"),i.jc(8,"Password: "),i.Ib(9,"br"),i.jc(10),i.Jb(),i.Jb(),i.Kb(11,"button",7),i.Rb("click",function(){return i.ec(t),i.Tb(2).setUpdate()}),i.jc(12,"Update"),i.Jb(),i.Kb(13,"button",8),i.Rb("click",function(){return i.ec(t),i.Tb(2).delete()}),i.jc(14,"Delete"),i.Jb(),i.Jb()}if(2&t){const t=i.Tb(2);i.xb(5),i.kc(t.company.email),i.xb(5),i.kc(t.company.password)}}function H(t,e){if(1&t&&(i.Kb(0,"div"),i.Kb(1,"div",6),i.Kb(2,"h2"),i.jc(3),i.Jb(),i.Jb(),i.hc(4,B,15,2,"div",3),i.Jb()),2&t){const t=i.Tb(),e=i.dc(6);i.xb(3),i.kc(t.company.name),i.xb(1),i.Xb("ngIf",!t.update)("ngIfElse",e)}}function A(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email is required"),i.Jb())}function U(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email must be valid"),i.Jb())}function D(t,e){if(1&t&&(i.Kb(0,"div",16),i.hc(1,A,2,0,"small",17),i.hc(2,U,2,0,"small",17),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("email").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("email").errors.email)}}function F(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Password is required"),i.Jb())}function Z(t,e){if(1&t&&(i.Kb(0,"small"),i.jc(1),i.Jb()),2&t){const t=i.Tb(3);i.xb(1),i.mc(" Password should be at least ",t.form.get("password").errors.minlength.requiredLength," characters long, now it is ",t.form.get("password").errors.minlength.actualLength," characters long ")}}function G(t,e){if(1&t&&(i.Kb(0,"div",16),i.hc(1,F,2,0,"small",17),i.hc(2,Z,2,2,"small",17),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("password").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("password").errors.minlength)}}function z(t,e){if(1&t){const t=i.Lb();i.Kb(0,"form",9),i.Rb("ngSubmit",function(){return i.ec(t),i.Tb().submit()}),i.Kb(1,"div",10),i.Kb(2,"label"),i.jc(3,"Update email"),i.Jb(),i.Ib(4,"input",11),i.hc(5,D,3,2,"div",12),i.Jb(),i.Kb(6,"div",10),i.Kb(7,"label"),i.jc(8,"Update password"),i.Jb(),i.Ib(9,"input",13),i.hc(10,G,3,2,"div",12),i.Jb(),i.Kb(11,"button",14),i.jc(12,"Save"),i.Jb(),i.Kb(13,"button",15),i.Rb("click",function(){return i.ec(t),i.Tb().update=!1}),i.jc(14,"Cancel"),i.Jb(),i.Jb()}if(2&t){const t=i.Tb();i.Xb("formGroup",t.form),i.xb(5),i.Xb("ngIf",t.form.get("email").invalid&&t.form.get("email").touched),i.xb(5),i.Xb("ngIf",t.form.get("password").invalid&&t.form.get("password").touched),i.xb(1),i.Xb("disabled",t.form.invalid||t.form.submitting)}}function $(t,e){1&t&&(i.Kb(0,"p",18),i.jc(1,"Loading..."),i.Jb())}const W=function(){return["/admin/companies"]};let Y=(()=>{class t{constructor(t,e,n,r){this.route=t,this.companiesService=e,this.router=n,this.alertService=r,this.loading=!1,this.update=!1,this.submitting=!1}ngOnInit(){this.loadCompany()}ngOnDestroy(){this.dSub&&this.dSub.unsubscribe()}delete(){this.dSub=this.companiesService.delete(this.company.id).subscribe(()=>{this.alertService.success("Company deleted"),this.router.navigate(["/admin/companies"])},t=>{this.alertService.danger(t.error.message)})}loadCompany(){this.loading=!0,this.route.params.subscribe(t=>{this.companiesService.getById(t.id).subscribe(t=>{this.company=t,null!=this.company&&(this.loading=!1)},t=>{this.alertService.danger(t.error.message)})})}submit(){this.form.invalid||(this.submitting=!0,this.companiesService.update({id:this.company.id,name:this.company.name,email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.update=!1,this.submitting=!1,this.alertService.success("Company updated"),this.loadCompany()},t=>{this.alertService.danger(t.error.message)}))}setUpdate(){this.update=!0,this.form=new v.d({email:new v.b(this.company.email,[v.n.email,v.n.required]),password:new v.b(this.company.password,[v.n.required,v.n.minLength(3)])})}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(a.a),i.Hb(g.a),i.Hb(a.c),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-company-details"]],decls:9,vars:4,consts:[[1,"card"],[3,"routerLink"],[1,"btn","btn-dark"],[4,"ngIf","ngIfElse"],["updateCompany",""],["loadingBlock",""],[1,"card","header"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-primary",3,"click"],[3,"formGroup","ngSubmit"],[1,"form-control"],["type","email","formControlName","email"],["class","validation",4,"ngIf"],["type","text","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-dark",3,"click"],[1,"validation"],[4,"ngIf"],[1,"text-center"]],template:function(t,e){if(1&t&&(i.Kb(0,"div",0),i.Kb(1,"a",1),i.Kb(2,"button",2),i.jc(3,"Back"),i.Jb(),i.Jb(),i.hc(4,H,5,3,"div",3),i.Jb(),i.hc(5,z,15,4,"ng-template",null,4,i.ic),i.hc(7,$,2,0,"ng-template",null,5,i.ic)),2&t){const t=i.dc(8);i.xb(1),i.Xb("routerLink",i.Zb(3,W)),i.xb(3),i.Xb("ngIf",!e.loading)("ngIfElse",t)}},directives:[a.e,p.m,v.p,v.h,v.e,v.a,v.g,v.c],styles:["span[_ngcontent-%COMP%]{margin:5px}button[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-top:10px}label[_ngcontent-%COMP%]{color:#000;font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:700;line-height:1.6;background-color:#fff;color:#333}input[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}"]}),t})();function Q(t,e){if(1&t){const t=i.Lb();i.Kb(0,"div"),i.Kb(1,"div",6),i.Kb(2,"h2"),i.jc(3),i.Jb(),i.Jb(),i.Kb(4,"span"),i.Kb(5,"h3"),i.jc(6,"Email: "),i.Ib(7,"br"),i.jc(8),i.Jb(),i.Jb(),i.Kb(9,"span"),i.Kb(10,"h3"),i.jc(11,"Password: "),i.Ib(12,"br"),i.jc(13),i.Jb(),i.Jb(),i.Kb(14,"button",7),i.Rb("click",function(){return i.ec(t),i.Tb(2).setUpdate()}),i.jc(15,"Update"),i.Jb(),i.Kb(16,"button",8),i.Rb("click",function(){return i.ec(t),i.Tb(2).delete()}),i.jc(17,"Delete"),i.Jb(),i.Jb()}if(2&t){const t=i.Tb(2);i.xb(3),i.mc("",t.customer.firstName," ",t.customer.lastName,""),i.xb(5),i.kc(t.customer.email),i.xb(5),i.kc(t.customer.password)}}function V(t,e){if(1&t&&(i.Kb(0,"div"),i.hc(1,Q,18,4,"div",3),i.Jb()),2&t){const t=i.Tb(),e=i.dc(6);i.xb(1),i.Xb("ngIf",!t.update)("ngIfElse",e)}}function tt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"First name is required"),i.Jb())}function et(t,e){if(1&t&&(i.Kb(0,"div",18),i.hc(1,tt,2,0,"small",19),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("firstName").errors.required)}}function nt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Last name is required"),i.Jb())}function rt(t,e){if(1&t&&(i.Kb(0,"div",18),i.hc(1,nt,2,0,"small",19),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("lastName").errors.required)}}function it(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email is required"),i.Jb())}function at(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email must be valid"),i.Jb())}function ot(t,e){if(1&t&&(i.Kb(0,"div",18),i.hc(1,it,2,0,"small",19),i.hc(2,at,2,0,"small",19),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("email").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("email").errors.email)}}function st(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Password is required"),i.Jb())}function ct(t,e){if(1&t&&(i.Kb(0,"small"),i.jc(1),i.Jb()),2&t){const t=i.Tb(3);i.xb(1),i.mc(" Password should be at least ",t.form.get("password").errors.minlength.requiredLength," characters long, now it is ",t.form.get("password").errors.minlength.actualLength," characters long ")}}function bt(t,e){if(1&t&&(i.Kb(0,"div",18),i.hc(1,st,2,0,"small",19),i.hc(2,ct,2,2,"small",19),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.Xb("ngIf",t.form.get("password").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("password").errors.minlength)}}function mt(t,e){if(1&t){const t=i.Lb();i.Kb(0,"form",9),i.Rb("ngSubmit",function(){return i.ec(t),i.Tb().submit()}),i.Kb(1,"div",10),i.Kb(2,"label"),i.jc(3,"Update first name"),i.Jb(),i.Ib(4,"input",11),i.hc(5,et,2,1,"div",12),i.Jb(),i.Kb(6,"div",10),i.Kb(7,"label"),i.jc(8,"Update last name"),i.Jb(),i.Ib(9,"input",13),i.hc(10,rt,2,1,"div",12),i.Jb(),i.Kb(11,"div",10),i.Kb(12,"label"),i.jc(13,"Update email"),i.Jb(),i.Ib(14,"input",14),i.hc(15,ot,3,2,"div",12),i.Jb(),i.Kb(16,"div",10),i.Kb(17,"label"),i.jc(18,"Update password"),i.Jb(),i.Ib(19,"input",15),i.hc(20,bt,3,2,"div",12),i.Jb(),i.Kb(21,"button",16),i.jc(22,"Save"),i.Jb(),i.Kb(23,"button",17),i.Rb("click",function(){return i.ec(t),i.Tb().update=!1}),i.jc(24,"Cancel"),i.Jb(),i.Jb()}if(2&t){const t=i.Tb();i.Xb("formGroup",t.form),i.xb(5),i.Xb("ngIf",t.form.get("firstName").invalid&&t.form.get("firstName").touched),i.xb(5),i.Xb("ngIf",t.form.get("lastName").invalid&&t.form.get("lastName").touched),i.xb(5),i.Xb("ngIf",t.form.get("email").invalid&&t.form.get("email").touched),i.xb(5),i.Xb("ngIf",t.form.get("password").invalid&&t.form.get("password").touched),i.xb(1),i.Xb("disabled",t.form.invalid||t.form.submitting)}}function lt(t,e){1&t&&(i.Kb(0,"p",20),i.jc(1,"Loading..."),i.Jb())}const ut=function(){return["/admin/customers"]};let dt=(()=>{class t{constructor(t,e,n,r){this.route=t,this.customersService=e,this.router=n,this.alertService=r,this.loading=!1,this.update=!1,this.submitting=!1}ngOnInit(){this.loadCustomer()}ngOnDestroy(){this.dSub&&this.dSub.unsubscribe()}delete(){this.dSub=this.customersService.delete(this.customer.id).subscribe(()=>{this.alertService.success("Customer deleted"),this.router.navigate(["/admin/customers"])},t=>{this.alertService.danger(t.error.message)})}loadCustomer(){this.loading=!0,this.route.params.subscribe(t=>{this.customersService.getById(t.id).subscribe(t=>{this.customer=t,null!=this.customer&&(this.loading=!1)},t=>{this.alertService.danger(t.error.message)})})}submit(){this.form.invalid||(this.submitting=!0,this.customersService.update({id:this.customer.id,firstName:this.form.value.firstName,lastName:this.form.value.lastName,email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.update=!1,this.submitting=!1,this.alertService.success("Customer updated"),this.loadCustomer()},t=>{this.alertService.danger(t.error.message)}))}setUpdate(){this.update=!0,this.form=new v.d({firstName:new v.b(this.customer.firstName,[v.n.required]),lastName:new v.b(this.customer.lastName,[v.n.required]),email:new v.b(this.customer.email,[v.n.email,v.n.required]),password:new v.b(this.customer.password,[v.n.required,v.n.minLength(3)])})}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(a.a),i.Hb(N),i.Hb(a.c),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-customer-details"]],decls:9,vars:4,consts:[[1,"card"],[3,"routerLink"],[1,"btn","btn-dark"],[4,"ngIf","ngIfElse"],["updateCustomer",""],["loadingBlock",""],[1,"card","header"],[1,"btn","btn-dark",3,"click"],[1,"btn","btn-primary",3,"click"],[3,"formGroup","ngSubmit"],[1,"form-control"],["type","text","formControlName","firstName"],["class","validation",4,"ngIf"],["type","text","formControlName","lastName"],["type","email","formControlName","email"],["type","text","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-dark",3,"click"],[1,"validation"],[4,"ngIf"],[1,"text-center"]],template:function(t,e){if(1&t&&(i.Kb(0,"div",0),i.Kb(1,"a",1),i.Kb(2,"button",2),i.jc(3,"Back"),i.Jb(),i.Jb(),i.hc(4,V,2,2,"div",3),i.Jb(),i.hc(5,mt,25,6,"ng-template",null,4,i.ic),i.hc(7,lt,2,0,"ng-template",null,5,i.ic)),2&t){const t=i.dc(8);i.xb(1),i.Xb("routerLink",i.Zb(3,ut)),i.xb(3),i.Xb("ngIf",!e.loading)("ngIfElse",t)}},directives:[a.e,p.m,v.p,v.h,v.e,v.a,v.g,v.c],styles:["span[_ngcontent-%COMP%]{margin:5px}button[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{margin-top:10px}label[_ngcontent-%COMP%]{color:#000;font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:700;line-height:1.6;background-color:#fff;color:#333}input[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}"]}),t})();function ft(t,e){1&t&&(i.Kb(0,"div",11),i.Kb(1,"small"),i.jc(2,"Name is required"),i.Jb(),i.Jb())}function pt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email is required"),i.Jb())}function gt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email must be valid"),i.Jb())}function ht(t,e){if(1&t&&(i.Kb(0,"div",11),i.hc(1,pt,2,0,"small",12),i.hc(2,gt,2,0,"small",12),i.Jb()),2&t){const t=i.Tb();i.xb(1),i.Xb("ngIf",t.form.get("email").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("email").errors.email)}}function vt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Password is required"),i.Jb())}function Jt(t,e){if(1&t&&(i.Kb(0,"small"),i.jc(1),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.mc(" Password should be at least ",t.form.get("password").errors.minlength.requiredLength," characters long, now it is ",t.form.get("password").errors.minlength.actualLength," characters long ")}}function Kt(t,e){if(1&t&&(i.Kb(0,"div",11),i.hc(1,vt,2,0,"small",12),i.hc(2,Jt,2,2,"small",12),i.Jb()),2&t){const t=i.Tb();i.xb(1),i.Xb("ngIf",t.form.get("password").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("password").errors.minlength)}}const wt=function(){return["/admin/companies"]};let xt=(()=>{class t{constructor(t,e,n){this.companiesService=t,this.router=e,this.alertService=n}ngOnInit(){this.form=new v.d({name:new v.b("",v.n.required),email:new v.b("",[v.n.email,v.n.required]),password:new v.b("",[v.n.required,v.n.minLength(3)])})}submit(){this.companiesService.add({name:this.form.value.name,email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.alertService.success("Company added"),this.router.navigate(["/admin/companies"])},t=>{this.alertService.danger(t.error.message)})}formReset(){this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(g.a),i.Hb(a.c),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-company-add"]],decls:26,vars:7,consts:[[1,"container"],[3,"routerLink"],[1,"btn","btn-dark"],[1,"card",3,"formGroup","ngSubmit"],[1,"form-control"],["type","text","placeholder","Company name","formControlName","name"],["class","validation",4,"ngIf"],["type","email","placeholder","Company email","formControlName","email"],["type","password","placeholder","Company password","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-dark",3,"click"],[1,"validation"],[4,"ngIf"]],template:function(t,e){1&t&&(i.Kb(0,"div",0),i.Kb(1,"a",1),i.Kb(2,"button",2),i.jc(3,"Back"),i.Jb(),i.Jb(),i.Kb(4,"form",3),i.Rb("ngSubmit",function(){return e.submit()}),i.Kb(5,"h2"),i.jc(6,"Register new company"),i.Jb(),i.Kb(7,"div",4),i.Kb(8,"label"),i.jc(9,"Company name"),i.Jb(),i.Ib(10,"input",5),i.hc(11,ft,3,0,"div",6),i.Jb(),i.Kb(12,"div",4),i.Kb(13,"label"),i.jc(14,"Company email"),i.Jb(),i.Ib(15,"input",7),i.hc(16,ht,3,2,"div",6),i.Jb(),i.Kb(17,"div",4),i.Kb(18,"label"),i.jc(19,"Company password"),i.Jb(),i.Ib(20,"input",8),i.hc(21,Kt,3,2,"div",6),i.Jb(),i.Kb(22,"button",9),i.jc(23,"Add new company"),i.Jb(),i.Kb(24,"button",10),i.Rb("click",function(){return e.formReset()}),i.jc(25,"Clear all fields"),i.Jb(),i.Jb(),i.Jb()),2&t&&(i.xb(1),i.Xb("routerLink",i.Zb(6,wt)),i.xb(3),i.Xb("formGroup",e.form),i.xb(7),i.Xb("ngIf",e.form.get("name").invalid&&e.form.get("name").touched),i.xb(5),i.Xb("ngIf",e.form.get("email").invalid&&e.form.get("email").touched),i.xb(5),i.Xb("ngIf",e.form.get("password").invalid&&e.form.get("password").touched),i.xb(1),i.Xb("disabled",e.form.invalid))},directives:[a.e,v.p,v.h,v.e,v.a,v.g,v.c,p.m],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border:1px solid green}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})();function yt(t,e){1&t&&(i.Kb(0,"div",12),i.Kb(1,"small"),i.jc(2,"First name is required"),i.Jb(),i.Jb())}function It(t,e){1&t&&(i.Kb(0,"div",12),i.Kb(1,"small"),i.jc(2,"Last name is required"),i.Jb(),i.Jb())}function Ct(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email is required"),i.Jb())}function jt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Email must be valid"),i.Jb())}function St(t,e){if(1&t&&(i.Kb(0,"div",12),i.hc(1,Ct,2,0,"small",13),i.hc(2,jt,2,0,"small",13),i.Jb()),2&t){const t=i.Tb();i.xb(1),i.Xb("ngIf",t.form.get("email").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("email").errors.email)}}function kt(t,e){1&t&&(i.Kb(0,"small"),i.jc(1,"Password is required"),i.Jb())}function Xt(t,e){if(1&t&&(i.Kb(0,"small"),i.jc(1),i.Jb()),2&t){const t=i.Tb(2);i.xb(1),i.mc(" Password should be at least ",t.form.get("password").errors.minlength.requiredLength," characters long, now it is ",t.form.get("password").errors.minlength.actualLength," characters long ")}}function Nt(t,e){if(1&t&&(i.Kb(0,"div",12),i.hc(1,kt,2,0,"small",13),i.hc(2,Xt,2,2,"small",13),i.Jb()),2&t){const t=i.Tb();i.xb(1),i.Xb("ngIf",t.form.get("password").errors.required),i.xb(1),i.Xb("ngIf",t.form.get("password").errors.minlength)}}const Lt=function(){return["/admin/customers"]};let Ot=(()=>{class t{constructor(t,e,n){this.customersService=t,this.router=e,this.alertService=n}ngOnInit(){this.form=new v.d({firstName:new v.b("",v.n.required),lastName:new v.b("",v.n.required),email:new v.b("",[v.n.email,v.n.required]),password:new v.b("",[v.n.required,v.n.minLength(3)])})}submit(){this.customersService.add({firstName:this.form.value.firstName,lastName:this.form.value.lastName,email:this.form.value.email,password:this.form.value.password}).subscribe(()=>{this.alertService.success("Customer added"),this.router.navigate(["/admin/customers"])},t=>{this.alertService.danger(t.error.message)})}formReset(){this.form.reset()}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(N),i.Hb(a.c),i.Hb(h.a))},t.\u0275cmp=i.Bb({type:t,selectors:[["app-customer-add"]],decls:31,vars:8,consts:[[1,"container"],[3,"routerLink"],[1,"btn","btn-dark"],[1,"card",3,"formGroup","ngSubmit"],[1,"form-control"],["type","text","placeholder","First name","formControlName","firstName"],["class","validation",4,"ngIf"],["type","text","placeholder","Last name","formControlName","lastName"],["type","email","placeholder","Customer email","formControlName","email"],["type","password","placeholder","Customer password","formControlName","password"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-dark",3,"click"],[1,"validation"],[4,"ngIf"]],template:function(t,e){1&t&&(i.Kb(0,"div",0),i.Kb(1,"a",1),i.Kb(2,"button",2),i.jc(3,"Back"),i.Jb(),i.Jb(),i.Kb(4,"form",3),i.Rb("ngSubmit",function(){return e.submit()}),i.Kb(5,"h2"),i.jc(6,"Register new customer"),i.Jb(),i.Kb(7,"div",4),i.Kb(8,"label"),i.jc(9,"First name"),i.Jb(),i.Ib(10,"input",5),i.hc(11,yt,3,0,"div",6),i.Jb(),i.Kb(12,"div",4),i.Kb(13,"label"),i.jc(14,"Last name"),i.Jb(),i.Ib(15,"input",7),i.hc(16,It,3,0,"div",6),i.Jb(),i.Kb(17,"div",4),i.Kb(18,"label"),i.jc(19,"Customer email"),i.Jb(),i.Ib(20,"input",8),i.hc(21,St,3,2,"div",6),i.Jb(),i.Kb(22,"div",4),i.Kb(23,"label"),i.jc(24,"Customer password"),i.Jb(),i.Ib(25,"input",9),i.hc(26,Nt,3,2,"div",6),i.Jb(),i.Kb(27,"button",10),i.jc(28,"Add new customer"),i.Jb(),i.Kb(29,"button",11),i.Rb("click",function(){return e.formReset()}),i.jc(30,"Clear all fields"),i.Jb(),i.Jb(),i.Jb()),2&t&&(i.xb(1),i.Xb("routerLink",i.Zb(7,Lt)),i.xb(3),i.Xb("formGroup",e.form),i.xb(7),i.Xb("ngIf",e.form.get("firstName").invalid&&e.form.get("firstName").touched),i.xb(5),i.Xb("ngIf",e.form.get("lastName").invalid&&e.form.get("lastName").touched),i.xb(5),i.Xb("ngIf",e.form.get("email").invalid&&e.form.get("email").touched),i.xb(5),i.Xb("ngIf",e.form.get("password").invalid&&e.form.get("password").touched),i.xb(1),i.Xb("disabled",e.form.invalid))},directives:[a.e,v.p,v.h,v.e,v.a,v.g,v.c,p.m],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border:1px solid green}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}"]}),t})();var qt=n("N2Tv");let Pt=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){if(this.authService.getClientRole()==qt.a.ADMINISTRATOR)return!0;this.authService.logout(),this.router.navigate(["/"],{queryParams:{authStatus:!1},queryParamsHandling:"merge",skipLocationChange:!0})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(b.a),i.Ob(a.c))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac}),t})(),Mt=(()=>{class t{}return t.\u0275mod=i.Fb({type:t}),t.\u0275inj=i.Eb({factory:function(e){return new(e||t)},providers:[Pt],imports:[[p.c,r.a,a.f.forChild([{path:"",component:f,children:[{path:"",redirectTo:"/",pathMatch:"full"},{path:"home",component:c,canActivate:[Pt]},{path:"companies",component:S,canActivate:[Pt]},{path:"customers",component:E,canActivate:[Pt]},{path:"companies/data/:id",component:Y,canActivate:[Pt]},{path:"customers/data/:id",component:dt,canActivate:[Pt]},{path:"companies/new",component:xt,canActivate:[Pt]},{path:"customers/new",component:Ot,canActivate:[Pt]}]}])],a.f]}),t})()}}]);